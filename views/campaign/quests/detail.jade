extends /layout

block title
  title= quest.name
  
block header
  +header
    .header-item.page-title 
      span= quest.name

block content
  .content-body
    if campaign.owned
      section
        .section-body
          .flex.center.pad
            a.btn(href=quest.id+'/add' data-response="modal") Add Subquest
            a.btn(href=quest.id+"/edit" data-response="modal") Edit Quest
            a.btn(href=quest.id+"/link" data-response="modal") Link Quest
            form(action=quest.id method="delete" data-response="json" data-reaction="redirect")
              button.btn Delete Quest
    if quest.description
      section
        .section-body
          .journal-markup!= markdown(quest.description)
    if quest.comments
      section
        .section-title comments
        .section-body
          .flex.vert.pad
            each comment in quest.comments
              .flex.vert
                .flex-no-size
                  .float.left
                  .float.right= comment.updatedAt
                .flex
                  .flex.no-size
                    //- profile photo
                  .flex.grow
    section
      .section-body
        .flex.fill.vert
          if quest.ancestors && quest.ancestors.length > 0
            each ancestor in quest.ancestors
              +quest(ancestor)
          +quest(quest,true)
          if quest.children && quest.children.length > 0
            each child in quest.children
              +quest(child)
