mixin navlink(options)
  case options.button
    when true
      li
        form(action=options.url method="post")
          block if block
          button(type="submit")= options.text
    default
      li(style=options.color ? {color: options.color} :"")&attributes(attributes)
        block if block
        a(href=options.url)= options.text
        
mixin dropdown(options)
  li.dropdown(data-target=options.id style=options.color ? {color: options.color} :"")&attributes(attributes)
    a(href="#")= options.text
    .dropdown-menu(id=options.id)
      ul
        block
  
nav#nav
  ul.navlinks
    +filter(user)
      +filter(!user.mainChar)
        +dropdown({id:'charselect',text:user.name})
          +navlink({url:'user/' + user.id + '/characters', text: 'Select Character'})
          +navlink({url:'user/' + user.id + '/characters/new', text: 'Create a Character'})
      +filter(user.mainChar)
        +dropdown({id:'charactermenu', text: mainChar.name})
          +navlink({url:'/pc/' + user.mainChar.id,text:'Character Sheet'})
          +navlink({url:'/pc/'+ user.mainChar.id + '/inventory',text:'Inventory'})
          +navlink({url:'/pc/' + + user.mainChar.id + '/journal',text:'Journal'})
      +filter(!campaign)
        +navlink({url: '/pc/new', text:'New Campaign'})
      +filter(campaign)
        +dropdown({id: 'campaignmenu', text: 'Campaign'})
          +navlink({url:'/algus/quests',text:'Quest'})
          +navlink({url:'/algus/maps',text:'Maps'})
      +filter(!party)
        +navlink({url: '/pc/new', text:'New Character'})
      +filter(party)
        +dropdown({id:'partymenu', text: 'Party'})
          each member in party
            +navlink({url:'/pc/' + member.id, text: member.name})
      +dropdown({id: 'accountmenu', text: 'Account'})
        +navlink({url:'/account', text: 'Settings'})
    +filter(!user)
      +navlink({url:'/about',text:'About'})
      +dropdown({id: '/', text:'Log In / Sign Up'})(class="signup")
        +navlink({url:'/login', text: 'Log In'})
        +navlink({url:'/signup', text: 'Sign Up'})
